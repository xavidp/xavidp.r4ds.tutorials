---
title: RStudio y Código
author: Miriam Heiss and David Kane
tutorial:
  id: rstudio-and-code
output:
  learnr::tutorial:
    language: es
    progressive: yes
    'allow_skip:': yes
runtime: shiny_prerendered
description: 'Introducción a los scripts de R y Quarto. Cubre material del
  Capítulo 3 Flujo de trabajo: conceptos básicos, Capítulo 5 Flujo de trabajo: 
  estilo de código, Capítulo 7 Flujo de trabajo: scripts y proyectos, y 
  Capítulo 29 Quarto.'
---

```{r setup, include = FALSE}
library(learnr)
library(tutorial.helpers)
library(tidyverse)
library(knitr)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local")
```

```{r copy-code-chunk, child = system.file("child_documents/copy_button.Rmd", package = "tutorial.helpers")}
```

```{r info-section, child = system.file("child_documents/info_section.Rmd", package = "tutorial.helpers")}
```

<!-- Chapter 29 -->



<!-- -->

<!-- To produce a complete report containing all text, code, and results, click “Render” or press Cmd/Ctrl + Shift + K. You can also do this programmatically with quarto::quarto_render("diamond-sizes.qmd"). This will display the report in the viewer pane as shown in Figure 29.3 and create an HTML file. -->

<!-- When you render the document, Quarto sends the .qmd file to knitr, https://yihui.name/knitr, which executes all of the code chunks and creates a new markdown (.md) document which includes the code and its output. The markdown file generated by knitr is then processed by pandoc, https://pandoc.org, which is responsible for creating the finished file.  -->

<!-- In the visual editor you can either use the buttons on the menu bar to insert images, tables, cross-references, etc. or you can use the catch-all ⌘ / shortcut to insert just about anything. If you are at the beginning of a line (as shown in Figure 29.5), you can also enter just / to invoke the shortcut. -->

<!-- Inserting images and customizing how they are displayed is also facilitated with the visual editor. You can either paste an image from your clipboard directly into the visual editor (and RStudio will place a copy of that image in the project directory and link to it) or you can use the visual editor’s Insert > Figure / Image menu to browse to the image you want to insert or paste it’s URL. In addition, using the same menu you can resize the image as well as add a caption, alternative text, and a link. -->

<!-- The visual editor has many more features that we haven’t enumerated here that you might find useful as you gain experience authoring with it. -->

<!-- Most importantly, while the visual editor displays your content with formatting, under the hood, it saves your content in plain Markdown and you can switch back and forth between the visual and source editors to view and edit your content using either tool. -->

<!-- The guide below shows how to use Pandoc’s Markdown for authoring Quarto documents in the source editor. (Maybe insert lots of these in Quarto 1 or 2, and then we can drop knowledge like crazy.) -->

<!-- To run code inside a Quarto document, you need to insert a chunk. There are three ways to do so: -->

<!-- The keyboard shortcut Cmd + Option + I / Ctrl + Alt + I. -->

<!-- The “Insert” button icon in the editor toolbar. -->

<!-- By manually typing the chunk delimiters ```{r} and ```. -->

<!-- We’d recommend you learn the keyboard shortcut. It will save you a lot of time in the long run! -->

<!-- chunks get a new keyboard shortcut: Cmd/Ctrl + Shift + Enter, which runs all the code in the chunk. -->

<!-- Chunk label (This has three advantages:) -->

<!-- Your chunk labels should be short but evocative and should not contain spaces. We recommend using dashes (-) to separate words (instead of underscores, _) and avoiding other special characters in chunk labels. -->

<!-- You are generally free to label your chunk however you like, but there is one chunk name that imbues special behavior: setup. When you’re in a notebook mode, the chunk named setup will be run automatically once, before any other code is run. -->

<!-- Additionally, chunk labels cannot be duplicated. Each chunk label must be unique. -->

<!-- The most important set of options controls if your code block is executed and what results are inserted in the finished report: -->

<!-- eval: false prevents code from being evaluated. (And obviously if the code is not run, no results will be generated). This is useful for displaying example code, or for disabling a large block of code without commenting each line. -->

<!-- include: false runs the code, but doesn’t show the code or results in the final document. Use this for setup code that you don’t want cluttering your report. -->

<!-- echo: false prevents code, but not the results from appearing in the finished file. Use this when writing reports aimed at people who don’t want to see the underlying R code. -->

<!-- message: false or warning: false prevents messages or warnings from appearing in the finished file. -->

<!-- results: hide hides printed output; fig-show: hide hides plots. -->

<!-- error: true causes the render to continue even if code returns an error. This is rarely something you’ll want to include in the final version of your report, but can be very useful if you need to debug exactly what is going on inside your .qmd. It’s also useful if you’re teaching R and want to deliberately include an error. The default, error: false causes rendering to fail if there is a single error in the document. -->

<!-- As you work more with knitr, you will discover that some of the default chunk options don’t fit your needs and you want to change them. -->

<!-- You can do this by adding the preferred options in the document YAML, under execute. For example, if you are preparing a report for an audience who does not need to see your code but only your results and narrative, you might set echo: false at the document level. That will hide the code by default, so only showing the chunks you deliberately choose to show (with echo: true). -->

<!-- There is one other way to embed R code into a Quarto document: directly into the text, with: `r `. This can be very useful if you mention properties of your data in the text.  -->

<!-- When inserting numbers into text, format() is your friend.  -->

<!-- Lots more stuff on figures, caching, tables, et cetera.  -->


<!-- Older Comments -->

<!-- Pull out all the best parts of the relevant chapters, mostly in order, and add them as knowledge drops throughout. -->

<!-- Will we ever move from Rpubs to Quarto Pub? Maybe. The help page for the Qquarto package does not look useful, but ChatGPT assures me that this is possible with quarto_render() and quarto_publish(). But, since  -->

<!-- Standardize how we refer to short cut keys. Use `Cmd/Ctrl + s`. The RStudio dosc use cool emojis . . . -->

<!-- Do more to bring the new RStudio docs into the discussion. -->

<!-- Lots of the gifs don't match the written descriptions. -->

<!-- Explain throughout, starting in the R script section, that there is a difference between the current workspace and the Quarto document itself. Maybe restart the R session more often? -->

<!-- Note how Iris graph is used in two different parts of this tutorial. If we need to remove/change it, we need to make both parts consistent. -->

<!-- There are often two or more ways to do the same thing: like create a new project or a new script. We should mention and explain this throughout. We should also standardize the approach we use, at least first time through. -->

<!-- maybe discuss dot files and directories, and why they appear and don't appear? -->

<!-- Hardest part is creating an R Project the first time. We can break it into separate steps? Can we show them the two different Project drop down methods? Actually, this should be taught from the File menu. Fix the gif to do that!  -->

<!-- MAYBE NOT! Restart R session several times. Restart RStudio session at least twice. Once for R Projects and once before starting R scripts.  -->

<!-- Do everything in visual with first Quarto document and then use source with the second.  Note how I misunderstood this! I thought "source" meant sourcing the code. This is about "Source" versus "Visual" buttons. -->

<!-- Make at least 3 Quarto documents. The first starts with all the junk. So does the second, so we can see how source connects to visual. Start the 3rd empty. -->

<!-- Code chunk labels are important. Always use them, at least in second Quarto document creation.-->

<!-- Make a second script. And maybe a third. -->

<!-- Should include a better code chunk options example. Not sure warning message example discussion works. Worth improving. Or maybe replacing with something simpler like echo or eval. Just want students to be comfortable with code chunk options. (Is this still the terminology in Quarto?) -->

<!-- Discuss options for whole document and how it goes in header. Example:  -->

<!-- execute: -->

<!--   echo: false -->


<!-- DK: Many images need updating because of the move to Quarto Pub (or maybe not?) and RStudio -> Posit. -->

## Introducción
### 

Este tutorial cubre [Capítulo 3 Flujo de trabajo: conceptos básicos](https://r4ds.hadley.nz/workflow-basics.html), [Capítulo 5 Flujo de trabajo: estilo de código](https://r4ds.hadley.nz/workflow-style .html), [Capítulo 7 Flujo de trabajo: _scripts_ y proyectos](https://r4ds.hadley.nz/workflow-scripts.html), y algún material de [Capítulo 29 Quarto](https://r4ds.hadley.nz /quarto.html) de [*R for Data Science (2e)*](https://r4ds.hadley.nz/) de Hadley Wickham, Mine Çetinkaya-Rundel y Garrett Grolemund.

Hasta ahora, has estado escribiendo tu código en los cuadros ordenados de nuestros tutoriales. ¿Qué pasa si quieres empezar a trabajar por tu cuenta? En este tutorial, aprenderás a usar scripts de R y documentos de Quarto (el sucesor de _R Markdown_), ¡y a publicar tu trabajo con Rpubs!

## Comprobando tu configuración
###

Este tutorial asume que has leído y completado todos los pasos en el tutorial "Primeros pasos" del capítulo del paquete **tutorial.helpers**. Te pediremos que **c**opies/**p**egues el **c**omando/**r**espuesta tan a menudo que acortaremos esta instrucción a CP/CR.

### Ejercicio 1

Deberías haber instalado el paquete **tidyverse**, entre otros. Carga el paquete `tidyverse` en tu Console de R usando la función `library()`.

###

Ejecuta `search()` en la consola para ver las bibliotecas que has cargado actualmente, luego copia y pega el resultado en el espacio a continuación.

```{r checking-your-setup-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 3)
```

### 

Debería haber cadenas como "package:tidyverse" en la salida. Estos son los paquetes que están cargados actualmente en tu espacio de trabajo.

### Ejercicio 2

En la consola, ejecuta:

```{r eval = FALSE, echo = TRUE}
rstudioapi::readRStudioPreference(name = "load_workspace", 
                                  default = "Code failed.")
```

CP/CR.

```{r checking-your-setup-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 3)
```

### 

El resultado debería ser FALSE. Si el resultado no es FALSE, deberías ejecutar este comando en la Consola:

`tutorial.helpers::prep_rstudio_settings()`

Esta función asegura que tu configuración para RStudio sea la adecuada.

### Ejercicio 3

Mira la parte superior izquierda de tu R Console. Aquí deberías ver la versión de R que estás ejecutando. Debería verse algo como la imagen de abajo.

```{r}
include_graphics("images/r_version.png")
```

Escribe `R.version` en la consola y presione retorno. CP/CR.

```{r checking-your-setup-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 3)
```

Esto debería devolver una lista de variables, incluidas "mayores" y "menores", que te indican tu versión de R. Esta debería ser la misma que la versión que viste en la parte superior izquierda de la consola. `R.version` no incluye paréntesis al final. Es una constante de R incorporada, no una función.

### Ejercicio 4

En breve, crearemos un nuevo proyecto para que comiences a trabajar. Antes de hacer esto, puede ser útil saber dónde te encuentras ahora.

En R Console, ejecuta `getwd()`. CP/CR.

```{r checking-your-setup-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 3)
```

### 

Esta función devuelve la ruta a tu directorio de trabajo en R. Una ruta es simplemente el camino que usarías para llegar a una ubicación en tu ordenador. En este caso, si quisieras encontrar la carpeta desde la que se ejecuta R, seguirías la ruta devuelta por `getwd()`.

Se puede encontrar más información sobre las rutas en el [sitio web de UC Berkeley](https://people.ischool.berkeley.edu/~kevin/unix-tutorial/section3.html).

### Ejercicio 5

Cada vez que inicies un nuevo Proyecto de R, querrás almacenarlo en una ubicación que puedas encontrar fácilmente. En este momento, es probable que esté en un lugar aislado en tu ordenador. Sería mucho más útil tener una ubicación dedicada a tus Proyectos de R.

Hagamos una carpeta y llámela `proyectos`

Si necesitas ayuda para crear una carpeta, puedes encontrar recursos útiles [aquí](https://www.tutorialspoint.com/ubuntu/ubuntu_files_and_folders.htm) para Linux, [aquí](https://support.apple.com/guide/mac-help/organize-files-using-folders-mh26885/mac) para macOS y [aquí](https://support.microsoft.com/en-us/office/create-a-new-folder-cbbfb6f5-59dd-4e5d-95f6-a12577952e17 ) para Windows.

También sería una buena idea almacenar esta carpeta en tu escritorio, para que puedas encontrarla fácilmente. **NOTA: No almacenes esta carpeta dentro de un directorio de almacenamiento en la nube como OneDrive.** Esto puede causarte muchos problemas imprevistos en el futuro.

## Proyectos de R
###

Los buenos científicos de datos mantienen su trabajo organizado. Debes colocar tu trabajo en diferentes Proyectos de R, que son simplemente carpetas (o directorios) en tu ordenador con algunos archivos auxiliares.

### Ejercicio 1

<!-- Antecedentes: https://support.rstudio.com/hc/en-us/articles/200526207-Using-RStudio-Projects#:~:text=RStudio%20projects%20are%20associated%20with,have%20R %20código%20y%20datos -->

Lee todas las instrucciones antes de continuar, ya que no podrás acceder a este tutorial mientras realizas tu proyecto.

Haz clic en `File -> New Project` (`Archivo -> Nuevo proyecto`) en el menú principal:

```{r}
include_graphics("images/new_project.png")
```

Selecciona `New Directory` (`Nuevo Directorio`):

```{r}
include_graphics("images/new_project_2.png")
```

Selecciona `New Project` (`Nuevo Proyecto`):

```{r}
include_graphics("images/new_project_3.png")
```

Sí, es confuso que esta sea la segunda vez que seleccionas `New Project` (`Nuevo proyecto`). Nombra el Proyecto `análisis-1` y cambia el subdirectorio del proyecto a tu nueva carpeta de `proyectos`.

```{r}
include_graphics("images/new_project_4.png")
```

Haz clic en `Create Project` (`Crear proyecto`). Recuerda el tutorial "Primeros pasos", donde vimos la advertencia "Terminate Jobs" ("Terminar trabajos"). **No hagas clic en el botón Terminate Jobs** todavía. Al hacerlo, se cerrará este tutorial. Echa un vistazo a nuestro gif primero.

<!-- DK: Need a new gif which uses the File menu to start things. -->

```{r}
include_graphics("images/new_project.gif")
```

Continúa y haz clic en "Terminar trabajos". Deberás reiniciar el tutorial pero, una vez que lo hagas, estarás en este nuevo proyecto. Para el resto de este tutorial, trabajaremos en `análisis-1`.

###

Ejecute `getwd()`. CP/CR.

```{r r-projects-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 3)
```

### 

Esta ruta ahora debería ser diferente a nuestra ruta anterior, similar a la ruta a continuación. Crear/abrir un Proyecto de R mueve la sesión de R a ese directorio.

```{r}
include_graphics("images/path_example.png")
```

### 

Si tu ruta no incluye tu carpeta `proyectos`, probablemente no seleccionaste el directorio `proyectos` al crear el `análisis-1`.

### Ejercicio 2

Ejecuta `list.files()`. CP/CR.

```{r r-projects-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 3)
```

### 

`list.files()` devuelve archivos contenidos en tu Proyecto de R actual. Esto debería devolver solo el archivo `análisis-1.Rproj`.

Mantener todos los archivos asociados con un proyecto determinado (datos de entrada, _scripts_ de R, resultados analíticos y figuras) juntos bajo un directorio es una práctica tan sabia y común que RStudio tiene soporte integrado para esto a través de proyectos.

### Ejercicio 3

Escribe `readLines("análisis-1.Rproj")` en la Consola de R y presiona enter. CP/CR.

```{r r-projects-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 3)
```

###

Esto debería devolverte líneas que contengan algunas configuraciones básicas para tu Proyecto de R. Por ejemplo, `RestoreWorkspace` está configurado como `default` (`predeterminado`).

## Secuencias de comandos de R (_scripts_)
###

Hasta ahora, solo hemos trabajado en la Consola de R, pero es bastante difícil escribir más de unas pocas líneas de código en la Consola a la vez.

Una solución son las **secuencias de comandos de R** (o "_scripts_ de R"). Estos son archivos que contienen una copia permanente de nuestro código.

### Ejercicio 1

Crea un script de R haciendo clic en el menú desplegable `File -> New File` (`Archivo -> Nuevo archivo`) en la parte superior izquierda de tu sesión de RStudio y seleccionando "R Script".

```{r}
include_graphics("images/new_r_script.gif")
```

### 

Debería aparecer un archivo vacío y sin título encima de la Consola de R. Este es tu archivo de script de R. También puedes crear un nuevo script de R usando el atajo de teclado `Cmd/Ctrl + Shift + N`. El uso de `Cmd/Ctrl` aquí significa que los usuarios de Apple escriben la tecla Comando y los usuarios de Linux o Windows escriben la tecla Control.

###

Escribe `5 * 5` en tu archivo de script de R y ejecuta el archivo haciendo clic en el botón "Fuente" en la esquina superior derecha. Esto ejecutará todo su código en la Consola. CP/CR.

```{r r-scripts-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Tu respuesta debería parecerse a esto:

````
> source("~/.active-rstudio-document", echo=TRUE)

> 5 * 5
[1] 25
> 
````


### 

El `5 * 5` debería haberse ejecutado en tu Consola de R. El valor retornado es `25`. Siempre que ejecutes un archivo de script de R presionando el botón "Fuente", Rstudio enviará todo el código del archivo a la Consola de R, como si lo hubieras vuelto a escribir todo allí y presionado retorno.

### Ejercicio 2

A menudo hay combinaciones de "teclas de atajo" que realizan la misma tarea que hacer clic en un botón. Coloca el cursor dentro de la ventana del script de R y presiona o usa el atajo de teclado `Cmd/Ctrl + Shift + Enter`.

###

Esto hace lo mismo que presionar el botón "Source" ("Fuente"). CP/CR.

```{r r-scripts-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

El uso de teclas de acceso directo es más rápido y más profesional que hacer clic en los botones.

### Ejercicio 3

En tu script de R, escribe `6 + 3` en la línea después de `5 * 5`. Si haces "source" en este archivo, todas las líneas se ejecutarán. Inténtalo. CP/CR.

```{r r-scripts-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

El resultado que ves es el mismo que sucedería si copiaras cada línea en la Consola y presionaras retorno después de cada una.

### Ejercicio 4

En lugar de obtener el archivo completo, podemos simplemente ejecutar (o "run"/correr) una sola línea. En tu script de R, coloca el cursor en la misma línea que `6 + 3` y haz clic en el botón "Run" a la izquierda del botón "Source". CP/CR.

```{r r-scripts-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

En lugar de ejecutarse ambas líneas en el script, solo se ejecuta la segunda línea. Y el proceso por el cual esto sucede no tiene nada que ver con todo el script. _Run_ no es lo mismo que _Source_. Con _Run_, solo estás copiando/pegando una línea del script, o el texto que hayas sombreado haciendo una selección parcial, a la Consola de R.

### Ejercicio 5

La tecla de atajo para ejecutar una sola línea de código es `Cmd/Ctrl + Enter`. En tu script de R, coloca el cursor en la misma línea que `5 * 5` y presiona `Cmd/Ctrl + Enter`. CP/CR.

```{r r-scripts-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

`Cmd/Ctrl + Enter` es probablemente la tecla de atajo más utilizada porque es muy útil para ejecutar tu código línea a línea.

En lugar de ejecutar tu código expresión a expresión, también puedes ejecutar el script completo en un solo paso con `Cmd/Ctrl + Shift + S`. Hacer esto regularmente es una excelente manera de asegurarse de haber capturado todas las partes importantes de tu código en el script. Pero ten en cuenta que esta tecla de atajo no es lo mismo que _Source_. En particular, _Source_ hace que se repita cada comando en el script.

<!-- DK: Lo anterior es difícil de seguir. ¿Con qué frecuencia la gente usa `Cmd/Ctrl + Shift + S`? -->

### Ejercicio 6

Regresa a la primera línea en tu script de R. Cambia `5 * 5` a `x <- 5 * 5`, creando así un objeto llamado `x` con un valor de 25. Haz clic en el botón "Source".

###

En la pestaña de la Consola de R, ejecuta `ls()`. CP/CR.

```{r r-scripts-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

`ls()` devuelve una lista de objetos presentes en tu entorno. Estos son los mismos objetos que se muestran en la pestaña _Environment_ (Entorno) en la esquina superior derecha de RStudio. Deberías ver que se mostró `x`, porque tu definiste `x` usando tu script de R.

### Ejercicio 7

Hasta ahora, hemos estado trabajando en un archivo no guardado. En la parte superior del panel de Código, el archivo debería llamarse actualmente `Untitled1` (`Sin título1`). Verás que el texto está en rojo, con un asterisco. Esto indica que hay cambios no guardados en el archivo.

```{r}
include_graphics("images/untitled_script.png")
```

### 

Elimina todo el código que hay actualmente en tu archivo de script de R. Luego haz clic en el ícono de guardar debajo del título del script, o usa el atajo `Cmd/Ctrl + s` para guardar el script. La primera vez que guardes un archivo, también le asignarás un nombre. Llamemos a este archivo `script-1`. El sufijo `.R` se agrega automáticamente.

En la Consola, ejecuta `list.files()`. CP/CR.

```{r r-scripts-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Recuerda que cuando ejecutamos esto anteriormente en el tutorial, solo se mostró el archivo `análisis-1.Rproj`. Ahora también debería mostrarse el archivo `script-1.R`.

### Ejercicio 8

Ahora que estamos puestos y comenzamos a trabajar con scripts de R, comencemos a dibujar gráficos. Estaremos haciendo el siguiente gráfico, paso a paso.

```{r}
hist_p <- ggplot(data = diamonds, 
                 mapping = aes(x = carat)) +
  geom_histogram(bins = 100,
                 color = "white") + 
  labs(title = "Histograma de Carat (Peso) entre 50,000 Diamantes", 
       subtitle = "Son muy comunes los carats justo en, o encima de, números significativos", 
       x = "Carat", 
       y = "Conteo", 
       caption = "conjunto de datos diamantes del paquete ggplot2 traducido en github en cienciadedatos/datos")

hist_p
```

### 

En la parte superior de tu archivo de script de R, escribe

```{r eval = FALSE, echo = TRUE}
library(tidyverse)
```

Ejecuta el archivo completo con `Cmd/Ctrl + Enter`. Luego usa la función `search()` en tu Console de R. CP/CR.

```{r r-scripts-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Esta función devuelve una lista de paquetes cargados en memoria de R. Esto debería incluir el texto `package:tidyverse`.

### Ejercicio 9

En la siguiente línea, inicia un `ggplot()`, configurando `data` a `diamonds` y mapeando `x` a `carat` con el siguiente código.

```{r eval = FALSE, echo = TRUE}
ggplot(data = diamonds,
       mapping = aes(x = carat))
```

Vuelve a ejecutar todo el archivo. Esto debería generar un gráfico en blanco en la pestaña "Plots" ("Gráficos") en la parte inferior derecha de tu sesión de RStudio.

###

En la consola, ejecuta `readLines("script-1.R")`. CP/CR.

```{r r-scripts-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

`ggplot()` generará solo un gráfico en blanco hasta que se agregue una capa `geom`. Ten en cuenta que puedes recibir una advertencia al usar `readLines()` si `script-1.R` no termina con una línea en blanco. Esta advertencia no nos importa, pero siempre es una buena práctica terminar un archivo de texto con una línea en blanco.

### Ejercicio 10

Agrega una capa con `geom_histogram()`. Cambia el color del borde en nuestro gráfico a blanco configurando `color` a `"white"` dentro de `geom_histogram`, y cambia el número de columnas en nuestro diagrama configurando el argumento `bins` a `100`.

```{r eval = FALSE, echo = TRUE}
geom_histogram(bins = 100,
               color = "white")
```

Ejecuta el archivo (clicando en "Run", fíjate en el descuido de esta instrucción anterior). "Ejecutar" un script generalmente significa "procesarlo", es decir, enviarlo al proceso de R. Hemos aprendido dos formas de ejecutar (fácilmente) un archivo completo: presionando el botón "Source" o presionando `Cmd/Ctrl + Shift + Enter`.

###

Esto debería generar columnas en tu gráfico. ¿Recordaste colocar un `+` después de la llamada `ggplot()` y antes de la capa `geom_histogram()`?

###

En la pestaña de la Consola de R, ejecuta `readLines("script-1.R")`. CP/CR.

```{r r-scripts-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Ten en cuenta que el argumento `color` que se usa aquí modifica el color del borde de nuestras columnas. Para cambiar el color del relleno, utiliza el argumento `fill` (`relleno`).

### Ejercicio 11

Ahora hagamos que nuestro gráfico se vea un poco mejor agregando una capa `labs()` con un título, subtítulo y etiquetas de eje apropiadas.

Recordatorio, así es como debería verse nuestro gráfico

```{r}
hist_p
```

Ejecuta tu archivo de script de R para ver tu trama completa. Nuevamente, ¡fíjate en el lenguaje aquí! Anteriormente, hicimos una distinción entre los botones "Source" y "Run" de arriba --- y esa distinción es real. Sin embargo, en lenguaje casual, usamos la palabra"run" ("ejecutar") para significar genéricamente "Dile al ordenador que ejecute los comandos en este archivo". No necesariamente nos importa cómo se logra eso.

###

En la pestaña de la Consola de R, ejecuta `readLines("script-1.R")`. CP/CR.

```{r r-scripts-11}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 8)
```

### 

Un buen estilo de codificación es como la puntuación correcta: puedes arreglártelas sin ella, peroseguroquehacequetodoseamásfácildeleer. Incluso como una persona que se inicia en la programación, es una buena idea trabajar en tu propio estilo de código. El uso de un estilo consistente hace que sea más fácil para los demás (¡incluido el futuro-tu!) leer tu trabajo y es particularmente importante si necesitas ayuda de otra persona.


### Ejercicio 12

Ahora tenemos el código que crea una gráfico en el `script-1`. ¿Cómo usamos este gráfico para otras cosas? En este momento tenemos que ejecutar el `script-1` cada vez que queremos ver el gráfico, lo cual es un poco engorroso.

###

Podemos usar la función `ggsave()`. Escribe `?ggsave` en la Consola de R. Esto abrirá la página de ayuda de `ggsave()`. Copia y pega la Descripción de la página de ayuda en el espacio a continuación.

```{r r-scripts-12}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

`ggsave()` se usa para guardar gráficos como archivos individuales, separados del código que creó el gráfico. En este caso usaremos el formato "png".

### Ejercicio 13

Queremos guardar nuestro gráfico completo en un objeto, lo que se puede hacer configurando nuestro gráfico igual a una variable. Llama a esta variable `hist_p`.

Ahora, usando la función `ggsave()`, podemos crear un png de nuestro diagrama a partir de nuestro código. En `ggsave()`, pon `plot` a `hist_p` y `file` a `"hist-harvard.png"`.

Tu archivo completo debería verse como:

```{r eval = FALSE, echo = TRUE}
library(tidyverse)

hist_p <- ggplot(data = diamonds, 
                 mapping = aes(x = carat)) +
  geom_histogram(bins = 100,
                 color = "white") + 
  labs(title = "Histograma de Carat (Peso) entre 50,000 Diamantes", 
       subtitle = "Son muy comunes los carats justo en, o encima de, números significativos", 
       x = "Carat", 
       y = "Conteo", 
       caption = "conjunto de datos diamantes del paquete ggplot2 traducido en github en cienciadedatos/datos")

ggsave(plot = hist_p, file = "hist-harvard.png")
```

### 

Ejecuta tu código.

### 

En la Consola de R, ejecuta `list.files()`. CP/CR.

```{r r-scripts-13}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Deberías ver el archivo `hist-harvard.png` que contiene tu gráfico. En la esquina inferior derecha de tu espacio de trabajo en la pestaña `Archivos`, haz clic en el archivo `hist-harvard.png` para ver tu gráfico.

Si el texto del título sale de la imagen, es posible que desees modificar el argumento `scale` (`escala`) en `ggsave()` para encontrar un mejor tamaño de imagen. `scale` toma el valor 1 de forma predeterminada.


## Quarto 1
### 

Quarto es un formato de archivo para crear documentos dinámicos con R y otros lenguajes, como Python. Para obtener más información sobre Quarto y cómo usarlo, ¡consulta la [página web oficial](https://quarto.org/)! Quarto es la tecnología sucesora de [R Markdown](https://rmarkdown.rstudio.com/).

### Ejercicio 1

Haz clic en `File -> New File` (`Archivo -> Nuevo archivo`) en la parte superior izquierda de la ventana de RStudio y selecciona "Quarto Document..." ("Documento de Quarto..."). Se te ofrecerá la opción de proporcionar un "Título" y un "Autor" para el documento. **Ten en cuenta que el título de un documento no tiene una conexión necesaria con el nombre del archivo en sí mismo.** Agrega "Mi Primer Documento en Quarto" como título y tu nombre como autor. Haz clic en `Create` (`Crear`).

```{r}
include_graphics("images/new_quarto_doc.gif")
```

### 

Ejecuta `list.files()`. CP/CR.

```{r quarto-1-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Como aún no hemos guardado el archivo, no aparece en este listado.

Quarto es una herramienta de interfaz de línea de comandos, no un paquete R. Esto significa que la ayuda, en general, no está disponible a través del `?`. En su lugar, mientras trabajas en este tutorial y usas Quarto en el futuro, has de consultar la [documentación de Quarto](https://quarto.org/).


### Ejercicio 2

Guarda el documento de Quarto haciendo clic en el icono del disco en la parte superior del archivo, o usando el atajo `Cmd/Ctrl + s`. Nombra el archivo como `quarto-1`. La extensión de archivo `.qmd` se agregará automáticamente.

Ahora que el documento está guardado, ejecuta `list.files()`. CP/CR.

```{r quarto-1-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Esto debería devolver `quarto-1.qmd`, así como `análisis-1.Rproj`, `script-1.R` y `hist-harvard.png`. Ten en cuenta cómo se utilizan diferentes sufijos para diferentes tipos de archivos.



### Ejercicio 3

En la esquina superior izquierda sobre tu documento de Quarto, deberías ver los botones "Source" y "Visual". Haz clic en "Source". Esto revertirá la forma en que vemos nuestro documento Quarto para que sea más similar a nuestro script de R. Exploraremos la opción "Visual" en breve.


```{r quarto-1-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edita la Respuesta",
	incorrect = NULL,
	rows = 3)
```

### 

<!-- DK: This could go somewhere else. -->

Puede ser tentador nombrar tus archivos `código.R` o `miscript.R`, pero has de pensar un poco más antes de elegir un nombre para tu archivo. Hay tres principios importantes a la hora de poner nombres a los archivos, y son los siguientes:
  
* Los nombres de los archivos deben ser legibles por máquina: evita espacios, símbolos y caracteres especiales. No confíes en la distinción entre mayúsculas y minúsculas para distinguir archivos.

* Los nombres de los archivos deben ser legibles por humanos: usa nombres de archivos que sirvan para describir lo que hay en el archivo.

* Los nombres de los archivos deberían funcionar bien con el orden predeterminado: comienza los nombres de archivo con números para que la ordenación alfabética los coloque en el orden en que se usan.



### Exercise 4

El archivo predeterminado de Quarto debería tener este aspecto:

```{r out.width = "875px"}
knitr::include_graphics("images/qmd_source.png")
```

### 

Como puedes ver, gran parte del texto es texto plano, no código. Sin embargo, hay fragmentos de código que nos permiten ejecutar código cuando se _renderiza_ (representa) el documento. Aquí hay un ejemplo de un fragmento de código de R:

```{r}
knitr::include_graphics("images/source_chunk.png")
```

Los documentos en Quarto utilizan _Markdown_ (un formato de texto plano fácil de escribir), que puede contener fragmentos de código incrustado. Estos fragmentos de código se pueden escribir en muchos lenguajes, incluidos R y Python. Los fragmentos de código te permiten usar R para crear diagramas y otros gráficos, y luego mostrarlos en un documento renderizado de Quarto.

###

Elimina todo excepto el encabezado YAML: el texto en el cuadro en la parte superior del archivo, así como los guiones. Agrega "Este es mi primer texto en Markdown." en la parte inferior del documento.

###

Guarda el archivo y ejecuta `readLines("quarto-1.qmd") |> tail()`. CP/CR.

```{r quarto-1-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

<!-- DK: Drop some knowledge. Split up some of the paragraphs. -->

Esto debería devolver las últimas 6 líneas de tu documento de Quarto.

Los archivos de Quarto están diseñados para usarse de tres maneras:

* Para comunicarse con las personas que toman decisiones, que quieren centrarse en las conclusiones, no en el código detrás del análisis.

* Para colaborar con otras personas científicas de datos (¡incluida la futura-tu!), que están interesadas tanto en tus conclusiones como en cómo las alcanzaste (es decir, el código).

* Como un entorno en el que hacer ciencia de datos, como un cuaderno de laboratorio moderno donde puedes capturar no solo lo que hiziste, sino también lo que estabas pensando.

### Ejercicio 5

La principal ventaja de un documento de Quarto, en relación con un script simple de R, es crear algo que es una mezcla de palabras y código. Para "renderizar" (representar el resultado de) nuestro documento de Quarto, haz clic en la flecha "Render" en la parte superior del panel de Código, o usa el atajo `Cmd/Ctrl + shift + k`.

###

Renderizar es transformar un documento de Markdown en algún otro formato, por ejemplo, html, PDF, Microsoft Word, etc.

###

En el siguiente cuadro, copia todo el texto de tu documento de Quarto renderizado (que aparece en la pestaña Viewer).


```{r quarto-1-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

<!-- DK: Explain about the setting we changed to achieve this. maybe change the setting and then change it back? -->

Observa cómo el documento renderizado, que en este caso es un archivo html, aparece en la pestaña Viewer en el panel de Archivos en la parte inferior derecha del espacio de trabajo.

### Ejercicio 6

En los documentos de Quarto, puedes usar la sintaxis de Markdown. Puedes usar esto para crear encabezados de varios niveles y texto en **negrita** o *cursiva*. por ejemplo.

###

Convierte el texto creado en la sección anterior en un encabezado agregando `##` al principio de la línea (seguido de un espacio), luego agrega este texto debajo como descripción: `Puedes hacer muchas cosas geniales en Quarto como texto en **negrita** y *cursiva*.` Renderiza el archivo de nuevo. ¿Todo se ve bien en el visor?

###

Ejecuta `readLines("quarto-1.qmd") |> tail()` en la Consola. CP/CR.

```{r quarto-1-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Puedes encontrar una lista completa de estilos y comandos de formato Markdown [aquí](https://www.markdownguide.org/basic-syntax/).

### Ejercicio 7

En la esquina superior izquierda del panel de Código, deberías poder ver dos botones: "Source" y "Visual". "Source" te muestra todo el código, mientras que "Visual" te muestra (principalmente) cómo se verá el documento después de ser renderizado. Puedes editar un documento en Quarto mientras estás en el modo "Source" o "Visual".

###

Vamos a cambiar a "Visual" y explorar cómo podemos editar mientras aún estamos en "Visual". Cambia a "Visual" haciendo clic encima.

###

Escribe "Hice esto a través de Quarto" debajo de "Este es mi primer texto Markdown" mientras aún estás en modo de edición "Visual". Copia y pega todo en tu documento (mientras aún estás en modo de edición "Visual") en el cuadro a continuación.


```{r quarto-1-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Guarda el archivo. Renderiza el documento, solo para asegurarte de que funcionó.

### Ejercicio 8

Ahora intentemos agregar fragmentos de código en nuestro documento de Quarto. Debajo del texto que agregamos anteriormente, agrega un fragmento de código presionando el comando "Add Chunk" ("Agregar fragmento") en la parte superior del editor (el botón C verde con un signo más al lado) o con el atajo `opción + cmd + i`. El fragmento de código recién creado estará vacío, como en el ejemplo anterior.

###

Guarda el archivo y ejecuta `readLines("quarto-1.qmd") |> tail()` en la consola. CP/CR.


```{r quarto-1-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Esto debería mostrar el fragmento de código que creaste.

### Ejercicio 9

<!-- DK: ¿Usar pingüinos Palmer? -->

Intentemos graficar los datos de **iris** dentro de nuestro fragmento de código. En primer lugar, necesitamos cargar las bibliotecas que necesitamos.

###

A menudo creamos un fragmento de código de "configuración" cuando comenzamos a trabajar en un archivo, donde podemos cargar bibliotecas y preparar datos para su uso. En la parte superior del archivo, directamente debajo del encabezado YAML, crea otro fragmento de código, como se ve a continuación.

En el fragmento de código de configuración, usa la función `library()` con el argumento **tidyverse**. Siempre etiqueta tus fragmentos de código. Agregar una etiqueta hace que los fragmentos de código sean más fáciles de ordenar y comprender. Tu fragmento de configuración debería verse así:

```{r}
knitr::include_graphics("images/setup_chunk.png")
```

### 

**Punto importante**: Hay dos "mundos" diferentes con los que estamos tratando. Primero está el mundo del documento de Quarto, el archivo qmd. El segundo es el mundo de la consola en nuestra sesión actual de RStudio. **Estos mundos solo se conectan cuando los conectamos nosotros**. Algo escrito en un documento de Quarto --- o un script de R --- no es parte de nuestra sesión de R actual (no se muestran los objectos de R en la pestaña _Environment_ del panel superior derecho mostrado en RStudio).

###

En este momento, tus bibliotecas no se han cargado en la sesión de R actual. Para cargarlos, debes ejecutar el fragmento de código. Esto se puede hacer usando el botón Run en la parte superior derecha de tu archivo qmd, o con el atajo cmd + shift + enter.

Ejecuta el fragmento de código.

###

Ejecuta `readLines("quarto-1.qmd") |> head(15)` en la Consola. CP/CR.

```{r quarto-1-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Siempre que usemos `library()` en nuestros documentos de Quarto, usaremos un fragmento de código de configuración. No cargues bibliotecas en el mismo fragmento donde hagas tus cálculos o gráficos.

### Ejercicio 10

Vuelve al fragmento de código que creaste al principio. Vamos a crear el siguiente gráfico de dispersión en nuestro documento de Quarto:

```{r}
scat_p <- ggplot(data = iris, 
                 mapping = aes(x = Sepal.Width, 
                               y = Sepal.Length, 
                              color = Species)) +
  geom_point() +
  labs(title = "Medidas para Diferentes Especies de Iris",
       subtitle = "Virginica tiene los sépalos más largos",
        x = "Ancho.Sepalo", #Sepal.Width
        y = "Largo.Sepalo", # Sepal.Length
       caption = "Fisher (1936)")
scat_p
```

Este gráfico debería ser similar a los que has creado en los tutoriales de visualización anteriores.

###

Copia el código a continuación en tu fragmento de Código de R.

```{r eval = FALSE, echo = TRUE}
ggplot(data = iris, 
       mapping = aes(x = Sepal.Width, 
                     y = Sepal.Length, 
                     color = Species))
```

### 

Renderiza el archivo. Ahora deberías ver tu fragmento de código de R, así como un gráfico en blanco, ya que no hemos agregado una capa de geom aún.

Ejecuta `readLines("quarto-1.qmd") |> tail(10)` en la Consola. CP/CR.

```{r quarto-1-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### Ejercicio 11

Para agregar una capa de geom, agrega `geom_point()` a tu gráfico. Deberás renderizar de nuevo el archivo. ¡Ahora nuestro gráfico ya no sale en blanco; muestra un diagrama de dispersión!

###

Ejecuta `readLines("quarto-1.qmd") |> tail(10)` en la Consola. CP/CR.

```{r quarto-1-11}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

<!-- DK: Drop some knowledge! -->

El resultado debe incluir las últimas 10 líneas de código de tu documento de Quarto.

### Ejercicio 12

Acabamos de construir el gráfico básico, pero todavía se ve un poco feo. Las etiquetas son importantes para agregar contexto al gráfico y hacerlo más fácil de entender.

Usa la función `labs()` para agregar títulos apropiados y etiquetas de eje al gráfico.

Recordatorio, así es como debería verse nuestro gráfico

```{r echo = FALSE}
scat_p
```

### 

Renderiza el archivo nuevamente para ver tu gráfico completo.

###

Ejecuta `readLines("quarto-1.qmd") |> tail(10)` en la Consola. CP/CR.

```{r quarto-1-12}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### Ejercicio 13

Ahora, usamos solo un fragmento de código porque queríamos hacer un gráfico completo. Un _Chunk_ ("fragmento") de código de R te impide usar código R en la misma línea que el texto. Aquí es cuando tenemos que usar el código R **en línea**.

El código R en línea es esencialmente una forma de colocar cálculos de R simples en la misma línea que el texto. Agrega el siguiente código a tu fragmento de código de configuración.

```{r echo = FALSE}
x <- 1234567890
```

El fragmento de configuración ahora debería verse así.

```{r}
knitr::include_graphics("images/new_setup_chunk.png")
```

### 

Ejecuta el fragmento de código, luego en la consola, escribe `x` para verificar que se haya definido x. CP/CR.

```{r quarto-1-13}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### Ejercicio 14

Vamos a hacer algo de código R en línea.

En tu documento de Quarto, directamente después del fragmento de código que acabamos de crear, escribe el siguiente texto y el código R en línea. **NOTA**: Escribe esto manualmente, no lo copies. El código pegado puede ser quisquilloso y es posible que no se registre como código R en línea.

La variable x tiene un valor de: `` `r knitr::inline_expr("scales::comma(x)")` ``.

###

<!-- DK: corrija esta imagen. -->

<!-- Procesar el archivo. Deberías ver que la línea ahora se parece a -->

<!-- ```{r} -->

<!-- knitr::include_graphics("imágenes/valor_x.png") -->

<!-- ``` -->

<!-- ### -->

Como puedes ver, es solo una versión condensada de un fragmento de código completo. Declaramos el lenguaje (R) y luego declaramos nuestra función (`scales::comma(x)`). Al hacer esto, podemos poner el código R en la misma línea que el texto real. Recuerda que aquí usamos acentos abiertos (o "graves") para indicar el código.

###

Ejecuta `readLines("quarto-1.qmd") |> tail(10)` en la Consola. CP/CR.

```{r quarto-1-14}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

En lugar de codificar los valores en texto en tu archivo Markdown, debes intentar siempre calcular los valores sobre la marcha utilizando el código R en línea. Esto garantiza que los valores siempre serán precisos, independientemente de los cambios en los conjuntos de datos en cuestión. Para obtener más información sobre el código R en línea, puedes consultar la [Guía de opciones de ejecución de Quarto](https://quarto.org/docs/computations/execution-options.html).

### Ejercicio 15

<!-- DK: Añadir una imagen. -->

<!-- DK: ¡Incómodo! Muestre un ejemplo. -->

En este momento, nuestro documento en Quarto se ve un poco feo. No queremos que nuestro código se muestre en el informe presentado. Podemos deshacernos de él usando argumentos de los fragmentos de código.

Los argumentos de los fragmentos de código son una forma de decirle a un fragmento lo que debe hacer cuando se procesa. Las opciones de los fragmentos de código están escritas debajo de `{r}` en nuestro fragmento de código. Cambiemos `echo` a `false` para evitar que el código se muestre en nuestro informe. Tanto `echo` como `label` són opciones de fragmentos de código. Las opciones de los fragmentos de código están precedidas por un `#|`, llamado _"hash-pipe"_. Después del nombre de la opción, coloca dos puntos, seguidos del valor de la opción.

Ejecuta `readLines("quarto-1.qmd")` en la consola, luego copia y pega el comando y el resultado a continuación.

```{r quarto-1-15}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Algunas otras opciones de fragmentos de código útiles que merece la pena mirar incluyen `warning` ("advertencia") y `message`("mensaje"). Puedes encontrar una lista completa de opciones de fragmentos de código en la [Guía de opciones de ejecución de Quarto](https://quarto.org/docs/computations/execution-options.html). Casi siempre usaremos `echo: false` para ocultarel código en nuestros proyectos.

###

Felicidades por la creación de un documento de Quarto completo. Has aprendido a crear gráficos, agregar texto y usar código R en línea.

## Quarto 2
<!-- DK: Drop some knowledge. Tell us about the options now, and at the end, after you have taught them to us. -->

Now let's make another Quarto document, and explore some more options!

### Exercise 1

Make a new Quarto document. Name the document `quarto-2`, and instead of creating the document as normal, hit "Create Empty Document", in the bottom left corner of the creation screen.

```{r}
knitr::include_graphics("images/qmd_creation.png")
```

Save the document as `quarto-2`. Run `readLines("quarto-2.qmd")`. CP/CR.

```{r quarto-2-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

<!-- DK: Drop knowledge! -->

The document should be completely empty, apart from the YAML header

### Exercise 2

We are going to make another setup code chunk, where you can load all the libraries you need. Add a new code chunk with the green C at the top of the page.

### 

You may notice that there are curly braces `{}` at the top of the chunk, with an `r` inside. The `r` says that the language is R. In the next line, write `#| label: setup` in order to give the code chunk the label/name "setup."

### 

We don't need very many libraries for this, as we are just including images, but we do need the package **knitr**. Load **knitr** with `library(knitr)` in your setup chunk. (Recall that the terms "library" and "package" are used interchangeably.)

### 

**Notice the sloppy language!** There are two ways in which we can "load" **knitr**, corresponding to the two worlds we are working in simultaneous: QMD World and Console World.

### 

Putting the character string `library(knitr)` inside the `setup` code chunk is enough to "load" **knitr** in QMD World because, whenever we render a file, every line of code in the file is set to R for processing. Those characters, however, have no connection to Console World until we explicitly execute them by hand, generally with Cmd/Cntrl-return.

Do that now. Place the cursor next to the `library()` function calls and hit Cmd/Cntrl-return.

### 

Once all that is done, run `search()` in the Console. CP/CR

```{r quarto-2-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

<!-- DK: Explain this better! Not actually loaded unless you execute the code! -->

This should include the string `package:knitr`, indicating that **knitr** is loaded.

### Exercise 3

Make a new header with the title "Harvard Histogram". Remember we do this using `##`, followed by a space. Under this header, create a new code chunk. Use the code chunk argument `echo: false` to stop your code from showing up upon rendering the file.

### 

In your new code chunk, use the function `include_graphics()`. Set the argument to the name of your .png. Remember to use quotes. The command should look like `include_graphics("hist-harvard.png")`.

### Exercise 4

Remember the **iris** graph that we made? We are going to include that in the Quarto document along with the Harvard graph that we made. Make a header with the title "Iris scatter plot". Now, we need to save the graph to an object.

### 

Go back to the `quarto-1` document and copy and paste the code for the iris plot into the `quarto-2` document in a new code chunk labeled `iris`. Add the `echo: false` code chunk option as well. Save the file.

### 

Run `readLines("quarto-2.qmd")` in the Console. CP/CR.

```{r quarto-2-4}
question_text(text = NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### Exercise 5

Now that you have the code for the iris plot in your document, we are going to save it to an object. Call the object `iris_plot`.

### 

Run `readLines("quarto-2.qmd")` in the Console again. CP/CR.

```{r quarto-2-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### Exercise 6

Now, let's make the `iris_plot` into a .png using `ggsave()`.

### 

We are going to do it the same way as the Harvard plot. In a new code chunk labeled `iris_save`, type `ggsave()`. Set `plot` equal to `iris_plot`, and `file` equal to `"iris_plot.png"`. Now you have another .png to include in your `quarto-2` document.

### 

Now, we need to include the plot!

### 

In another code chunk called `iris_include`, type `include_graphics("iris_plot.png")`.

### 

Run `readLines("quarto-2.qmd")` in the Console. CP/CR.

```{r quarto-2-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### Exercise 7

Now, we are going to include more inline R code.

### 

In a new code chunk set `x` to `1234567890` with `<-`. Make sure to add the code chunk option `echo: false`.

### 

Now, we want the inline code to show in the document. Type x in the Console to make sure it is `1234567890`. (For this to work, you must also run the `x <- 1234567890` code in the Console, presumably using Cmd/Cntrl-return.)

### 

Now, you need to **TYPE** this into your document. Type it underneath the `iris_plot` code chunk. This does **not** go in a code chunk though.

The variable x has a value of: `` `r knitr::inline_expr("scales::comma(x)")` ``.

### 

Render the document. When you do, you should see your inline code at the bottom. It should look like this:

The variable x has a value of: `r scales::comma(x)`.

### 

Run `readLines("quarto-2.qmd")` in the Console. CP/CR.

### Exercise 8

Render the file, and take a look at your completed Quarto document. It should now include your `iris` graph, the `x` text, and your Harvard graphic.

Run `readLines("quarto-2.qmd") |> tail(10)` in the Console. CP/CR.

```{r quarto-2-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

## Publicación
###

Publicaremos nuestros documentos de Quarto en Internet mediante [Rpubs](https://rpubs.com/), un servicio de publicación web gratuito. Rpubs está administrado por Posit (anteriormente llamado RStudio), una empresa líder en el mundo de la ciencia de datos. Deberás crearte una cuenta de Rpubs.

###

En algún momento en el futuro, Rpubs desaparecerá y será reemplazada por [Quarto Pub](https://quartopub.com/). Pero eso no ha sucedido todavía. Algunas de las imágenes en esta Sección necesitarán adaptarse al cambio cuando esto ocurra.

### Ejercicio 1

Renderiza el archivo `quarto-2`. Al renderizarlo, estás generando un informe en HTML, que es lo que Rpubs publica en la web.

###

Ejecuta `list.files()` en la consola, luego copia y pega el comando y el resultado a continuación.

```{r publishing-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Deberías ver un archivo `quarto-2.html`, que se genera al renderizar tu qmd. (Ten en cuenta que la extensión de archivo "qmd" significa **Q**uarto **M**arkdown **D**ocument).

###

A veces editamos el encabezado YAML para deshacernos de información como la fecha y el título, ya que a veces se ve mal en el renderizado final. Sin embargo, asegúrate de no meterte con el resto del formato YAML porque es un lenguaje estructuralmente muy sensible. Puedes obtener más información sobre la edición de las cabeceras YAML en [bookdown.org](https://bookdown.org/yihui/bookdown/r-markdown.html).

### Ejercicio 2

Observa un icono azul en la esquina superior derecha de tu documento de Quarto. Debería verse como la imagen de abajo.

```{r out.width = "875px"}
include_graphics("images/publish_button.png")
```

Presiona en ese botón.

<!-- DK: Poor organization. What are students submitting? -->

### Ejercicio 3

Se te preguntará si deseas publicar en Rpubs o en Posit Connect. Usa Rpubs. (Posit Connect cuesta dinero). Recibirás un recordatorio de que todos los documentos que publiques en RPubs son visibles abiertamente. Haz clic en "Publish" ("Publicar").

```{r}
include_graphics("images/rpubs-6.png")
```

### Ejercicio 4

Esto te llevará al sitio web de RPubs. Deberás crear una cuenta. Sigue los pasos que se te indiquen.

```{r}
include_graphics("images/rpubs-7.png")
```

### Ejercicio 5

Agrega los detalles del documento. Asigna un nombre a tu documento. Agrega un _slug_ significativo (un nombre de sitio web único que a menudo es solo el nombre de tu proyecto), de lo contrario, terminarás con una dirección larga y fea que no eligiste y no puedas recordar. Puedes dejar la descripción en blanco si no deseas agregar una.

Ahora, deberías poder publicar. En el *Terminal* (la pestaña justo al lado de la Consola de R, esta es la forma en que las personas expertas publican en Quarto Pub) escribe `quarto publish quarto-pub` y presiona enter 2 veces. La primera vez es para validar la ubicación de la publicación y la segunda para publicar.

###

Puede llevar un tiempo, pero deberías ver un nuevo objeto en tu perfil de Quarto Pub.

### Ejercicio 6

Pon el enlace a tu página de RPubs en el espacio a continuación.

```{r publishing-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edita la Respuesta",
    incorrect = NULL,
    rows = 2)
```

### 

Ten en cuenta que este es ahora un sitio web que se puede encontrar en Internet, para que cualquiera lo vea.

## Resumen

Este tutorial cubrió el [Capítulo 3 Flujo de trabajo: conceptos básicos](https://r4ds.hadley.nz/workflow-basics.html), [Capítulo 5 Flujo de trabajo: estilo de código](https://r4ds.hadley.nz/workflow-style .html), [Capítulo 7 Flujo de trabajo: scripts y proyectos](https://r4ds.hadley.nz/workflow-scripts.html), y algún material en [Capítulo 29 Quarto](https://r4ds.hadley.nz /quarto.html) de [*R for Data Science (2e)*](https://r4ds.hadley.nz/) de Hadley Wickham, Mine Çetinkaya-Rundel y Garrett Grolemund.

¡Ahora ya sabes cómo usar proyectos de R, scripts de R, documentos de Quarto, cómo publicar una página en Internet usando RPubs y cómo usar una gran cantidad de comandos útiles de R!

```{r download-answers, child = system.file("child_documents/download_answers.Rmd", package = "tutorial.helpers")}
```
